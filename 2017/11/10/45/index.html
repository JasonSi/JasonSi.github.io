<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="Mr. Almost"><title>Neo4j &amp; Python 构建中国行政区划图 | Pujiaxun的空间</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.1.0"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/normalize/7.0.0/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/1.0.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/1.0.0/grids-responsive-min.css"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><link rel="alternate" type="application/atom+xml" href="/atom.xml"><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
ga('create','UA-113942183-1','auto');ga('send','pageview');</script></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">Neo4j &amp; Python 构建中国行政区划图</h1><a id="logo" href="/.">Pujiaxun的空间</a><p class="description">开始时捱一些苦，栽种绝处的花～</p></div><div id="nav-menu"><a class="current" href="/."><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a><a href="/history/"><i class="fa fa-book"> 历史</i></a><a href="/atom.xml"><i class="fa fa-rss"> 订阅</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">Neo4j &amp; Python 构建中国行政区划图</h1><div class="post-meta">Nov 10, 2017<span> | </span><span class="category"><a href="/categories/tech/">技术</a></span></div><a class="disqus-comment-count" href="/2017/11/10/45/#vcomment"><span class="valine-comment-count" data-xid="/2017/11/10/45/"></span><span>条评论</span></a><div class="clear"><div class="toc-article" id="toc"><div class="toc-title">文章目录</div><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#我为什么要做这个"><span class="toc-number">1.</span> <span class="toc-text">我为什么要做这个</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#起步"><span class="toc-number">2.</span> <span class="toc-text">起步</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#枚举行政区划级别"><span class="toc-number">2.1.</span> <span class="toc-text">枚举行政区划级别</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#给这些文件分类"><span class="toc-number">2.2.</span> <span class="toc-text">给这些文件分类</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#构造-Neo4j-需要的-CSV"><span class="toc-number">3.</span> <span class="toc-text">构造 Neo4j 需要的 CSV</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#抽取属性"><span class="toc-number">3.1.</span> <span class="toc-text">抽取属性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#构建行政单位实体"><span class="toc-number">3.2.</span> <span class="toc-text">构建行政单位实体</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#构建行政区上下级关系"><span class="toc-number">3.3.</span> <span class="toc-text">构建行政区上下级关系</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#用-UP-AD-NAME-字段找上级"><span class="toc-number">3.3.1.</span> <span class="toc-text">用 UP_AD_NAME 字段找上级</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#所以干脆拿全名前缀来匹配"><span class="toc-number">3.3.2.</span> <span class="toc-text">所以干脆拿全名前缀来匹配</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#完成CSV"><span class="toc-number">3.3.3.</span> <span class="toc-text">完成CSV</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#怎么玩-Neo4j"><span class="toc-number">4.</span> <span class="toc-text">怎么玩 Neo4j</span></a></li></ol></div></div><div class="post-content"><h2 id="我为什么要做这个"><a href="#我为什么要做这个" class="headerlink" title="我为什么要做这个"></a>我为什么要做这个</h2><p>我本人就很讨厌看到这种标题——我为什么xxx？喵喵喵？你为什么xxx关我什么事？唉，人总是会变成自己讨厌的人嘛。</p>
<p>换个说法，说说做这个的初衷，其实没有什么初衷，被逼的。</p>
<p>为了尽早完成毕业设计可以出去打工，我选择提前联系导师。于是就被提供了两个题目，我决定做水利相关的知识图谱。你看，多么河海特色！水水水，离开水就不能活了，没毛病。</p>
<p>于是先从图数据库入手，neo4j是个好东西，就决定是你了。在构建复杂的水水水相关实体前，我先拿中国行政区划数据试个水，逻辑相对简单，就一种隶属关系。</p>
<p>献上美图：</p>
<p><img src="http://upload-images.jianshu.io/upload_images/703144-834d5aefc1af92ae.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="Screen Shot 2017-11-10 at 16.08.23.png"></p>
<h2 id="起步"><a href="#起步" class="headerlink" title="起步"></a>起步</h2><p>首先，准备一下原料，中国行政区划元数据，不求完全结构化，起码半结构化，不然会很痛苦，毕竟有70W+数据。</p>
<p>Neo4j一套，python或者什么脚本语言一款，脑子一坨，足够了。</p>
<p>首先我拿到70W+的XML文件，哎哟我去，<code>ls</code>一下都卡半天，我都害怕python会不会应付不来，跑一遍几小时可能就太惨了。</p>
<p>首先用python列出几个文件：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">files = os.listdir(datas_path)</span><br><span class="line">print(files[<span class="number">0</span>])</span><br></pre></td></tr></table></figure>
<p>哈哈哈，我先搞个文件名，然后直接打开这个文件，避免了「我不能ls就不知道文件名，不知道文件名就不能看内容」的问题。可以看到里面的大致结构，这里取一部分：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mdExtInfo</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">obj_att</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">AD_GRAD</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">key</span>&gt;</span>行政区划级别<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">value</span>&gt;</span>村<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">AD_GRAD</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">AD_CODE</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">key</span>&gt;</span>行政区划代码<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">value</span>&gt;</span>441323121207<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">AD_CODE</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">UP_AD_NAME</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">key</span>&gt;</span>上级行政区划名称<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">value</span>&gt;</span>白盆珠镇<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">UP_AD_NAME</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">AD_FULL_NAME</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">key</span>&gt;</span>行政区划全称<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">value</span>&gt;</span>广东省-惠州市-惠东县-白盆珠镇-布心村民委员会<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">AD_FULL_NAME</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">AD_NAME</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">key</span>&gt;</span>行政区划名称<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">value</span>&gt;</span>布心村民委员会<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">AD_NAME</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">obj_att</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mdExtInfo</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="枚举行政区划级别"><a href="#枚举行政区划级别" class="headerlink" title="枚举行政区划级别"></a>枚举行政区划级别</h3><p>唉，几十万文件，我都不知道有几种行政区，先跑一遍看看有哪些区划级别。</p>
<p>核心代码：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">cates = set()</span><br><span class="line"><span class="keyword">for</span> file <span class="keyword">in</span> files:</span><br><span class="line">    doc = parse(datas_path + file)</span><br><span class="line">    <span class="keyword">for</span> item <span class="keyword">in</span> doc.iterfind(<span class="string">'mdExtInfo/obj_att/AD_GRAD'</span>):</span><br><span class="line">        title = item.findtext(<span class="string">'value'</span>)</span><br><span class="line">        cates.add(title)</span><br><span class="line">        print(title, file, cates)</span><br></pre></td></tr></table></figure>
<p>大概不到十分钟就能跑完，最后得到一共有6种级别：县级、村、国家级、乡级、地市级、省级。</p>
<h3 id="给这些文件分类"><a href="#给这些文件分类" class="headerlink" title="给这些文件分类"></a>给这些文件分类</h3><p>每次都跑十分钟太过分了，而且我发现，不同的级别，XML里的结构不同，比如省级有十几个字段，乡级只有五个。所以分类是必须的。</p>
<p>按照不同级别，将同级别的文件名放在一个文件里，方便以后遍历。</p>
<p><strong>到这里，我突然明白了一些道理，来来来，给自己加点戏！</strong></p>
<blockquote>
<p>本来以为都是非结构化数据，刚好有在看机器学习，哇可以学以致用了，把数据扔进去，自动聚类，开心的当上调参男孩…… 然而我发现数据格式化的挺不错，就开始自己去找他们的特征，这特喵不就是——人肉学习嘛！然而再反过来想，机器学习到底是什么呢？</p>
</blockquote>
<h2 id="构造-Neo4j-需要的-CSV"><a href="#构造-Neo4j-需要的-CSV" class="headerlink" title="构造 Neo4j 需要的 CSV"></a>构造 Neo4j 需要的 CSV</h2><h3 id="抽取属性"><a href="#抽取属性" class="headerlink" title="抽取属性"></a>抽取属性</h3><p>这么一大坨数据要导入的，用CQL实在太慢，生成指定格式的CSV文件就OK啦～真简单～</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">AD_CODE,AD_NAME,AD_GRAD,AD_AREA,AD_FULL_NAME,AD_ABBR_NAME,LOW_LEFT_LONG,UP_RIGHT_LONG,UP_RIGHT_LAT,AD_STAT_LAT,AD_STAT,LOW_LEFT_LAT,AD_STAT_LONG</span><br><span class="line">610000000000,陕西省,省级,197025.84,陕西省,陕西,105.4872,111.2422,39.58533,34.26645358,西安市新城区新城大院,31.70674,108.94952476</span><br><span class="line">650000000000,新疆维吾尔自治区,省级,1660000,新疆维吾尔自治区,新疆,73.49989,96.38728,49.18006,43.79179105,乌鲁木齐市中山路479号,34.33374,87.62484437</span><br><span class="line">130000000000,河北省,省级,187700,河北省,河北,113.4551,119.8485,42.61558,38.03705206,石家庄市长安区裕华东路113号,36.04881,114.52429283</span><br><span class="line"></span><br><span class="line">...</span><br></pre></td></tr></table></figure>
<p>哈哈哈哈，先把它们有用的属性都拿出来，按级别分类放到6个CSV文件中，结构如上，<strong>从此就可以舒服很多了，毕竟不用遍历几十万个文件了。</strong></p>
<h3 id="构建行政单位实体"><a href="#构建行政单位实体" class="headerlink" title="构建行政单位实体"></a>构建行政单位实体</h3><p>等…… 等一下……</p>
<p>其实在这之前，我发现了很多坑爹的地方，比如地市级单位有14个属性，但有个别数据只有几个属性，所以遍历的时候一定要判断，不存在的话要用空字符串替代，不然CSV对不齐后面就会更坑。</p>
<p>首先做个属性映射，我不想存到数据库里字段都是瞎眼的大写：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">prop_maps = &#123;</span><br><span class="line">    <span class="string">'AD_CODE'</span>: <span class="string">'code:ID(AD)'</span>,</span><br><span class="line">    <span class="string">'AD_NAME'</span>: <span class="string">'name'</span>,</span><br><span class="line">    <span class="comment"># 'AD_GRAD': 'level',</span></span><br><span class="line">    <span class="string">'AD_AREA'</span>: <span class="string">'area:double'</span>,</span><br><span class="line">    <span class="string">'AD_FULL_NAME'</span>: <span class="string">'full_name'</span>,</span><br><span class="line">    <span class="string">'AD_ABBR_NAME'</span>: <span class="string">'abbr_name'</span>,</span><br><span class="line">    <span class="string">'LOW_LEFT_LONG'</span>: <span class="string">'low_left_longtitude:double'</span>,</span><br><span class="line">    <span class="string">'UP_RIGHT_LONG'</span>: <span class="string">'up_right_longtitude:double'</span>,</span><br><span class="line">    <span class="string">'UP_RIGHT_LAT'</span>: <span class="string">'up_right_latitude:double'</span>,</span><br><span class="line">    <span class="string">'AD_STAT_LAT'</span>: <span class="string">'station_latitude:double'</span>,</span><br><span class="line">    <span class="string">'AD_STAT'</span>: <span class="string">'station'</span>,</span><br><span class="line">    <span class="string">'LOW_LEFT_LAT'</span>: <span class="string">'low_left_latitude:double'</span>,</span><br><span class="line">    <span class="string">'AD_STAT_LONG'</span>: <span class="string">'station_longtitude:double'</span></span><br><span class="line">    <span class="comment"># 'UP_AD_NAME': 'father_name'</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>根据 <a href="http://neo4j.com/docs/operations-manual/current/tutorial/import-tool/" target="_blank" rel="noopener">Neo4j Import Tool</a> 上的格式，我们要注意ID字段，以及LABEL字段，我决定给它们两个标签，一个是级别，比如Province，一个是AD，表示Administrative Division 行政区划，毕竟这个数据库还会有很多水水水的数据进来。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">code:ID(AD),name,area:double,full_name,abbr_name,low_left_longtitude:double,up_right_longtitude:double,up_right_latitude:double,station_latitude:double,station,low_left_latitude:double,station_longtitude:double,:LABEL</span><br><span class="line">610000000000,陕西省,197025.84,陕西省,陕西,105.4872,111.2422,39.58533,34.26645358,西安市新城区新城大院,31.70674,108.94952476,AD;Province</span><br><span class="line">650000000000,新疆维吾尔自治区,1660000,新疆维吾尔自治区,新疆,73.49989,96.38728,49.18006,43.79179105,乌鲁木齐市中山路479号,34.33374,87.62484437,AD;Province</span><br><span class="line">130000000000,河北省,187700,河北省,河北,113.4551,119.8485,42.61558,38.03705206,石家庄市长安区裕华东路113号,36.04881,114.52429283,AD;Province</span><br><span class="line"></span><br><span class="line">...</span><br></pre></td></tr></table></figure>
<p>最后的数据如上所示（省级部分）。直接看一坨CSV体验很差对吧，其实不用看全，看到主要的几个字段就是可以了，比如<code>code:ID(AD)</code>，表示<code>code</code>字段，行政代码，<code>ID</code>表示我要用于之后导入关系的主键，<code>(AD)</code>表示这个ID不是全局的，是一个叫<code>AD</code>的group，可以理解命名空间，详情请看官方文档。还有<code>LABEL</code>字段，表示标签……废话…… <code>area:double</code>表示用双精度，否则默认为字符串，你不希望数字都变成字符串吧。</p>
<h3 id="构建行政区上下级关系"><a href="#构建行政区上下级关系" class="headerlink" title="构建行政区上下级关系"></a>构建行政区上下级关系</h3><p><strong>在这之前，必须要验证很多细节，比如真的所有数据都有上级这个属性嘛？所有数据都是完美的符合规则的嘛？果然不是。。。</strong></p>
<p>甚至，数据还有一些错误的，比如有一条就是<code>陕西省-嘉峪关市-市辖区</code>，为什么我发现他是错误的呢？我是陕西人嘛？我地理及格了嘛？NONONO！因为我想验证一下所有地名的全称，去掉最后一段，即上级行政区全称，是否存在。哈哈哈不存在的，结果就是没找到<code>甘肃省-嘉峪关市-市辖区</code>这条数据，仿佛链条都断掉了。</p>
<p>于是我跑了一下元数据，看看嘉峪关市到底是哪里的，发现陕西和甘肃都有，见鬼了，去网上搜了一下，不存在的。要把这条数据的「陕西」替换为「甘肃」，不想动元数据，所以写在了清理数据的脚本中。</p>
<h4 id="用-UP-AD-NAME-字段找上级"><a href="#用-UP-AD-NAME-字段找上级" class="headerlink" title="用 UP_AD_NAME 字段找上级"></a>用 UP_AD_NAME 字段找上级</h4><p>用几个字典，存下地名和代号，然后拿 UP_AD_NAME 去匹配上一级的字典。</p>
<p>我太天真了哈哈哈，测试一下有多少重名的，果然到了县级就没法看了，什么「西城区」，哪个城市都有。</p>
<h4 id="所以干脆拿全名前缀来匹配"><a href="#所以干脆拿全名前缀来匹配" class="headerlink" title="所以干脆拿全名前缀来匹配"></a>所以干脆拿全名前缀来匹配</h4><p>直接把所有行政区存到一个字典，全名为键，代号为值。找一个行政区的上级时，其实就是去掉最后一段。比如 <code>江苏省-南京市-江宁区</code> 的上级就是 <code>江苏省-南京市</code>，我验证了一下是不是字典里都存在。<strong>果然又㕛叒叕有几个不听话的数据。</strong></p>
<p>比如  <code>新疆生产建设兵团-农四师-兵团七十六团--三连</code> 最后居然两个<code>-</code>，中间是空的，我发现有这样的 <code>新疆生产建设兵团-农四师-兵团七十六团-兵团七十六团</code> 数据，就尝试给他们都加上，但结果是有些又找不到了。所以我干脆删了，后果是某些村级直接属于县级，算了算了没毛病，毕竟数据没给全，至少这样没什么大问题。</p>
<p>最后！<strong>居然发现有相同全名的</strong>，无话可说，仔细观察可以发现，都是村级的，名字一样，代号却不同，只能认为是干扰数据，随缘选一个吧。</p>
<h4 id="完成CSV"><a href="#完成CSV" class="headerlink" title="完成CSV"></a>完成CSV</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">:START_ID(AD),:END_ID(AD),:TYPE</span><br><span class="line">610000000000,000000000000,BELONGS_TO</span><br><span class="line">650000000000,000000000000,BELONGS_TO</span><br><span class="line">130000000000,000000000000,BELONGS_TO</span><br><span class="line">660000000000,000000000000,BELONGS_TO</span><br><span class="line">140000000000,000000000000,BELONGS_TO</span><br><span class="line">520000000000,000000000000,BELONGS_TO</span><br><span class="line">360000000000,000000000000,BELONGS_TO</span><br><span class="line">630000000000,000000000000,BELONGS_TO</span><br><span class="line">230000000000,000000000000,BELONGS_TO</span><br><span class="line"></span><br><span class="line">...</span><br></pre></td></tr></table></figure>
<p>最后就是生成这样的数据，再写个导入 neo4j 的脚本即可。</p>
<h2 id="怎么玩-Neo4j"><a href="#怎么玩-Neo4j" class="headerlink" title="怎么玩 Neo4j"></a>怎么玩 Neo4j</h2><p>算了下一篇文章再写吧，累死了……</p>
</div><iframe src="/donate/?AliPayQR=/img/AliPayQR.jpg&amp;WeChatQR=/img/WeChatQR.jpg&amp;GitHub=null&amp;BTCQR=null&amp;BTCKEY=null&amp;PayPal=null" style="overflow-x:hidden; overflow-y:hidden; border:0xp none #fff; min-height:240px; width:100%;" frameborder="0" scrolling="no"></iframe><div class="tags"><a href="/tags/python/">python</a></div><div class="post-nav"><a class="pre" href="/2018/01/18/46/">我是如何提高生存效率的</a><a class="next" href="/2017/09/13/43/">快速排序算法原来这么简单</a></div><div id="vcomment"></div><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine@latest/dist/Valine.min.js"></script><script>var notify = 'false' == true ? true : false;
var verify = 'false' == true ? true : false;
var GUEST_INFO = ['nick','mail','link'];
var guest_info = 'nick,mail'.split(',').filter(function(item){
  return GUEST_INFO.indexOf(item) > -1
});
guest_info = guest_info.length == 0 ? GUEST_INFO :guest_info;
window.valine = new Valine({
  el:'#vcomment',
  notify:notify,
  verify:verify,
  appId:'GdYXc7NL6OjXbEsEJpbupajS-gzGzoHsz',
  appKey:'V1O9dvhLxl0T3bC1aVN9TrUC',
  placeholder:'坐下说坐下说...',
  avatar:'mm',
  guest_info:guest_info,
  pageSize:'10'
})</script></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><form class="search-form" action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank"><input type="text" name="q" maxlength="20" placeholder="Search"/><input type="hidden" name="sitesearch" value="http://www.pujiaxun.com"/></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/tech/">技术</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/life/">生活</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="/tags/Git/" style="font-size: 15px;">Git</a> <a href="/tags/Web/" style="font-size: 15px;">Web</a> <a href="/tags/JavaScript/" style="font-size: 15px;">JavaScript</a> <a href="/tags/Ruby/" style="font-size: 15px;">Ruby</a> <a href="/tags/面试/" style="font-size: 15px;">面试</a> <a href="/tags/爬虫/" style="font-size: 15px;">爬虫</a> <a href="/tags/实习/" style="font-size: 15px;">实习</a> <a href="/tags/English/" style="font-size: 15px;">English</a> <a href="/tags/闲谈/" style="font-size: 15px;">闲谈</a> <a href="/tags/macOS/" style="font-size: 15px;">macOS</a> <a href="/tags/LaTeX/" style="font-size: 15px;">LaTeX</a> <a href="/tags/算法/" style="font-size: 15px;">算法</a> <a href="/tags/python/" style="font-size: 15px;">python</a> <a href="/tags/效率/" style="font-size: 15px;">效率</a> <a href="/tags/生活/" style="font-size: 15px;">生活</a> <a href="/tags/经济学/" style="font-size: 15px;">经济学</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> 最近文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2018/12/28/50/">图片视频瀑布流长列表性能优化实践</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/12/25/49/">图片预加载踩坑</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/10/25/48/">Webpack热更新内存泄漏探索</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/02/09/47/">Chrome中sticky定位的导航栏产生1px缝隙</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/01/18/46/">我是如何提高生存效率的</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/11/10/45/">Neo4j & Python 构建中国行政区划图</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/09/13/43/">快速排序算法原来这么简单</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/09/01/42/">macOS 中文输入法时 VS Code 快捷键失效</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/08/25/41/">如何区别真假网址？</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/07/25/40/">Chrome焦点从地址栏回到页面中</a></li></ul></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2019 <a href="/." rel="nofollow">Pujiaxun的空间.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=0.1.0" async></script><script type="text/javascript" src="//cdn.bootcss.com/fancybox/3.2.5/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.1.0" async></script><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/fancybox/3.2.5/jquery.fancybox.min.css"><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.1.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.1.0"></script></div></body></html>